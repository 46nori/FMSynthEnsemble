# Tips

## YM2203 (OPN) / YM2608 (OPNA) 共通

- FM関連レジスタはライトのみ。設定値のリードはできない。リードできるのはステータスレジスタだけ。
- SSG関連レジスタはライト/リード可能。
- レジスタアドレス指定後の17サイクル分のウエイトは静的に確保するしかない。データ設定後のようにステータスレジスタのBUSY(bit7)の監視では確認できない。
- リードサイクル(/RD and /CS)・ライトサイクル(/WR and /CS)はそれぞれ250ns, 200ns以上のアクティブ期間が必要。sleep_us(1)で確保できるはずだが、sleep_us(2)以上でないとアクセスが安定しなかった。(オシロで測定したがsleep_us()の精度は悪くはない。)

## YM2608 (OPNA)

- \$29 : SCH Enable
  - CH4,5,6を使用するためにはSCHをセットしなければならない。デフォルトではセットされていない。
- \$28 : Key on/off
  - CH4,5,6の指定値が不連続なっている。おそらくD2の追加でOPNとの互換をとったのが原因。  
  
    |CH|D2-D0にセットする値|
    |:------:|:---------------:|
    |1|0|
    |2|1|
    |3|2|
    |4|**4**|
    |5|**5**|
    |6|**6**|

- ステレオ出力(L/R)制御
  - FM音源 : \$b4-\$b6 の上位2ビット
  - リズム音源: \$18-\$1d の上位2ビット

- $27 CH3の動作モード
  - YM2608アプリケーションマニュアルの記載が間違っている。OPNと同一仕様なので以下が正しい。  

    |D7 D6| モード   |
    |:---:|---------|
    | 0 0 | ノーマル |
    | 0 1 | 効果音   |
    | 1 0 | CSM     |
